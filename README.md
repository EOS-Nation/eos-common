# `eos-common`

[![Build Status](https://travis-ci.org/EOS-Nation/eos-common.svg?branch=master)](https://travis-ci.org/EOS-Nation/eos-common)
[![npm version](https://badge.fury.io/js/eos-common.svg)](https://badge.fury.io/js/eos-common)
[![MIT licensed](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/EOS-Nation/eos-common/master/LICENSE)

> EOSIO Smart Contract common library used for Typescript

## Goal

To implement the most commonly used EOSIO C++ Classes into Typescript:

-   [Asset](https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/asset.hpp)
-   [Symbol](https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/symbol.hpp)
-   [SymbolCode](https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/symbol.hpp)
-   [ExtendedAsset](https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/asset.hpp)
-   [ExtendedSymbol](https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/symbol.hpp)

## Installation

Using Yarn:

```bash
yarn add eos-common
```

or using NPM:

```bash
npm install --save eos-common
```

## Quick Start

```ts
import { Asset, Symbol } from "eos-common"

const quantity = new Asset(10000, new Symbol("EOS", 4));
// or
const quantity = new Asset('1.0000 EOS');
quantity.to_string() //=> "1.0000 EOS";
quantity.symbol.code() //=> "EOS"
quantity.symbol.precision() //=> 4
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [Asset](#asset)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
    -   [amount](#amount)
    -   [is_amount_within_range](#is_amount_within_range)
    -   [is_valid](#is_valid)
    -   [max_amount](#max_amount)
-   [check](#check)
    -   [Parameters](#parameters-1)
    -   [Examples](#examples-1)
-   [SymbolCode](#symbolcode)
-   [Symbol](#symbol)
    -   [Parameters](#parameters-2)
    -   [Examples](#examples-2)
-   [stake2vote](#stake2vote)
    -   [Parameters](#parameters-3)
-   [vote2stake](#vote2stake)
    -   [Parameters](#parameters-4)
-   [voteWeightToday](#voteweighttoday)

### Asset

Asset

#### Parameters

-   `amount` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The amount of the asset
-   `sym` **[Symbol](#symbol)** The name of the symbol

#### Examples

```javascript
const quantity = new Asset(10000, new Symbol("EOS", 4));
quantity.to_string() //=> "1.0000 EOS";
quantity.symbol.code() //=> "EOS"
quantity.symbol.precision //=> 4
```

Returns **[Asset](#asset)** Asset

#### amount

{int64_t} The amount of the asset

#### is_amount_within_range

Check if the amount doesn't exceed the max amount

Returns **any** true - if the amount doesn't exceed the max amount

Returns **any** false - otherwise

#### is_valid

Check if the asset is valid. %A valid asset has its amount &lt;= max_amount and its symbol name valid

Returns **any** true - if the asset is valid

Returns **any** false - otherwise

#### max_amount

{constexpr int64_t} Maximum amount possible for this asset. It's capped to 2^62 - 1

### check

Assert if the predicate fails and use the supplied message.

#### Parameters

-   `pred` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Pre-condition
-   `msg` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Error Message

#### Examples

```javascript
check(a == b, "a does not equal b");
```

Returns **void** 

### SymbolCode

### Symbol

Symbol

#### Parameters

-   `code` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Symbol Code
-   `precision` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Precision

#### Examples

```javascript
const sym = new Symbol("EOS", 4);
// or
const sym = new Symbol("4,EOS");
sym.code() //=> "EOS"
sym.precision() //=> 4
```

Returns **[Symbol](#symbol)** Symbol

### stake2vote

Convert EOS stake into decaying value

#### Parameters

-   `staked`  
-   `vote` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** vote

### vote2stake

Convert vote decay value into EOS stake

#### Parameters

-   `vote`  
-   `staked` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** staked

### voteWeightToday

voteWeightToday computes the stake2vote weight for EOS, in order to compute the decaying value.
